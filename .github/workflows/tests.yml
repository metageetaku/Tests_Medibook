name: Python Selenium Tests

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  tests:
    runs-on: ubuntu-latest

    steps:
    # 1️⃣ Récupérer le code
    - name: Checkout repo
      uses: actions/checkout@v3

    # 2️⃣ Installer Python
    - name: Setup Python
      uses: actions/setup-python@v4
      with:
        python-version: 3.11

    # 3️⃣ Installer les dépendances directement (solution sans requirements.txt)
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install selenium chromedriver-autoinstaller pytest

    # 4️⃣ Installer Chromium (utile pour Selenium)
    - name: Install Chromium
      run: sudo apt-get update && sudo apt-get install -y chromium-browser

    # 5️⃣ Lancer les tests
    - name: Run tests
      run: |
        pytest -v --tb=short
